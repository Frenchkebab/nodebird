# React vs Next

## SSR과 SPA

### SSR

**브라우저** <-> **프론트 서버** <-> **백엔드 서버** <-> **DB**

### SPA(CSR: Client-Side Rendering)

**브라우저** <-> **프론트 서버**

: 어떤 것을 요청하든 하나의 html, css, js 파일을 렌더링해줌
-> **data**가 없음
(브라우저에서는 데이터가 없음)

**브라우저** -> **백엔드** -> **DB** -> **DB** -> **브라우저**
(로딩창)

브라우저가 바로 받아오면 로딩창을 없애고 백엔드의 데이터를 받아서 화면을 그려줌

### 다시말하면...

전통적인 웹사이트에서는 브라우저에서 요청을 보내면 프론트에서 백으로 데이터를 요청함
백엔드에서 데이터를 받으면 프론트에서 데이터를 처리해서 보여줌

하지만 React, Vue, Angular 등은 먼저 페이지를 하나 받고, 데이터 없이 화면만 받고 로딩창을 돌려놓고
백엔드 서버에서 직접 데이터를 받아옴

전통적인 경우에는 전체가 한방에 그려진다는 장점이 있지만, 로딩 속도가 많이 느려짐
(요즘에 3초 안에 화면이 안그려지면 사람들이 떠남... 근데 뭐라도 화면에 나오기만 하면 인내심이 생김)

후자의 경우 일단 화면에 뭐라도 그려줄 수 있음.

전체적인 시간은 비슷할 수도 있고, 리액트의 방식이 더 오래걸릴 수도 있음
(로딩창은 보여주지만, 전체를 한번에 받아와야 하기 떄문에 사실은 더 오래 걸릴수도 있음.
심지어 사용자는 사용하지 않을 관리자 페이지까지도 다 가져오게 됨)
-> 단순히 로딩창을 빨리 그려주기 위해서 사용하는 것

따라서 비즈니스적으로 리액트를 쓰지 않는 것이 더 빠를 수도 있다!

그리고 첫 페이지에 방문을 했을 때 로딩창만 보여서 SEO에서 검색순위가 떨어질 수도 있다
(구글 같은 경우 똑똑해서 리액트임을 감지하고 더 기다려줄 수도 있지만 네이버같은 경우에는 미완성 사이트라고 생각하고 떠나버릴 수도 있음)

### 해결 방법

1. SSR (Server-Side Rendering)
   1-1) **프리렌더** : 검색엔진일 때에만 백엔드 서버에서 받아와서 html을 완성해서 주고, 일반 유저일 경우에는 리액트 방식
   1-2) SSR : 첫 방문만 전통적인 방식으로 하고, 그 이후에는 리액트 방식으로 함 (링크나 a태그를 누르는 경우)

2. Code Splitting
   : 딱 방문할 페이지만 나눠서 그려줌

따라서 SSR과 Code Splitting을 실무에서는 반드시 적용해 주어야 함!

Admin Page 등은 Next를 사용하여 SSR과 Code Splitting 등을 사용할 필요가 없고 그냥 React를 써도 된다.

하지만 직접 고객이 방문할 경우에는 Next를 쓰는 것이 낫다
(하지만 React로도 두 가지를 구현할 수 있음)

### 다시 정리

React의 경우에는 방문 시 로딩창이 있고 그동안 브라우저가 백엔드에 요청하여 데이터를 받아옴.

하지만 Next를 쓰는 경우, 브라우저를 통해 방문하는 첫 페이지만 브라우저 -> 프론트 -> 백 -> DB 의 순서로 요청을 하고,
그 다음부터는 React와 같은 방식으로 CSR를 사용함.
(미리 클릭할 만한 링크 등은 Pre-Fetching으로 미리 받아와서 조금 더 빠르게 사용이 가능함)
